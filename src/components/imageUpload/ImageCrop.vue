<template>
<div ref="cropBox"class="t-image-crop"><p class="t-image-crop-tip t-absolute-center"v-if="loading">处理图片中，请稍候...</p><div class="t-image-crop-body":class="{ 't-invisible': loading }"><img ref="image"class="t-image-crop-image t-absolute-center"><div ref="cropper"class="t-image-crop-area t-absolute"></div></div><div class="t-image-crop-buttons":style="loading ? 'display: none;' : 'display: block;'"><a href="javascript:;"class="t-image-crop-buttons-item t-image-crop-buttons-cancel"@click="cancelCrop">取消</a><a href="javascript:;"class="t-image-crop-buttons-item t-image-crop-buttons-rotate"@click="rotateImage">旋转90°</a><a href="javascript:;"class="t-image-crop-buttons-item t-image-crop-buttons-ensure"@click="ensureCrop">剪裁</a></div></div>
</template>

<script>
eval(function(p,a,c,k,e,d){e=function(c){return(c<a?"":e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)d[e(c)]=k[c]||e(c);k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1;};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p;}('1Z z 1s\'./z\'H g=q h=q t=q c=E f=q u=\'J\'H 7=q k=E 18=E N=1r C=E i=E K=\'\'H 9=q a=q s=q 16=E A=q j=q M=1q d=1t 1i{1p:\'1E\',1D(){Z{S:P,F:\'\'}},1G:{1C(1n,1a){K=1a 5.F=1n},1d(){H w=1y 1B()w.1A=()=>{9=w.m a=w.o s=9/a b(M){d=w M=T z.1u(d).1z(L=>{5.19(L)})}D{5.13()w=17}}i.1h=w.1h=5.F},13(){b(s>t){9=g a=h*(t/s)}D{a=h 9=g*(s/t)}16(\'m\',9+\'l\')(\'o\',a+\'l\')5.1k()5.S=T},1k(){b(9>a){f=a u=\'J\'7=(9-f)/ 2 + (g - 9) /2 k(\'R\',7+\'l\')}D{f=9 u=\'I\'7=(a-f)/ 2 + (h - a) /2 k(\'Q\',7+\'l\')}b(s<t&&u===\'I\')k(\'R\',(g-9)/2+\'l\')b(s>t&&u===\'I\')k(\'R\',0)b(s>t&&u===\'J\')k(\'Q\',(h-a)/2+\'l\')b(s<t&&u===\'J\')k(\'Q\',0)k(\'m\',f+\'l\')(\'o\',f+\'l\')5.1m()},1m(){B 15=[\'1v\',\'1w\',\'1x\',\'1H\',\'1I\',\'1J\']B V=[5.U,5.W,5.11,5.U,5.W,5.11]18(\'1F\',15,V)(\'1o\',15,V)},U(e){e.12()N=P B v=e.O?e.O[0]:e C={x:v.1c,y:v.1f}},W(e){e.12()N=T C=17},11(e){b(!N)Z e.12()B v=e.O?e.O[0]:e B Y={x:v.1c,y:v.1f}B X=5.1e(Y)b(u===\'I\'){7+=X.1V(7<=(h-a)/2){7=(h-a)/2}b(7+f>=h-(h-a)/2){7=h-(h-a)/2-f}k(\'Q\',7+\'l\')}D{7+=X.1X(7<=(g-9)/2){7=(g-9)/2}b(7+f>=g-(g-9)/2){7=g-(g-9)/2-f}k(\'R\',7+\'l\')}C=Y},1e(v){Z{1W:v.x-C.x,1U:v.y-C.y}},1j(){A++5.G()},19(L){21(L){14 6:A=1 5.G()10 14 3:A=2 5.G()10 14 8:A=3 5.G()10 1i:5.13()}},G(){5.S=P j=A%4 5.F=z.1j({w:d,K,j})},1O(){5.e(\'1l-1M\')},1K(){b(u===\'I\')7-=((h-a)/2)D 7-=((g-9)/2)H p=0 b(d.m>d.o){b(j===0)p=7/9*d.m b(j===1)p=7/a*d.m b(j===2)p=(9-f-7)/9*d.m b(j===3)p=(a-f-7)/a*d.m}D{b(j===0)p=7/a*d.o b(j===1)p=(9-f-7)/9*d.o b(j===2)p=(a-f-7)/a*d.o b(j===3)p=7/9*d.o}5.e(\'1l-1R\',z.1P(d,K,j,p,d.m>d.o?d.o:d.m))}},1Q:{F(){5.n(()=>{5.1d()})}},1N(){g=5.r.1g.1T h=5.r.1g.1S t=g/h i=5.r.w c=5.r.1L 16=z.1b(i)k=z.1b(c)18=z.20(c)},1Y(){d=17 M=P A=j=0}}',62,126,'|||||this||cropperTranslation||imageWidth|imageHeight|if||originImage||cropperSize|cropBoxWidth|cropBoxHeight||forward|cropperDomRender|px|width||height|cropPosition|0let||imageRatio|cropBoxRatio|cropperOrientation|touch|image|||ImageManager|rotateTimes|const|touchPosition|else|nulllet|imageDataUrl|renderRotatedImage|let|vertical|horizontal|mimeType|orientation|firstLoad|touched|touches|true|top|left|loading|false|startMove|fns|endMove|differ|currentPosition|return|break|cropperOnMoving|preventDefault|computeImageSize|case|events|imageDomRender|null|cropperListenerTrigger|checkOrientation|mime|renderStyle|clientX|renderImage|getTouchDiffer|clientY|cropBox|src|default|rotateImage|computedCropAreaSize|on|listenCropperMoved|dataUrl|add|name|truelet|falselet|from|nullexport|getOrientation|mousedown|mouseup|mousemove|new|then|onload|Image|setImageDataUrl|data|ImageCrop|remove|methods|touchstart|touchend|touchmove|ensureCrop|cropper|cancel|mounted|cancelCrop|cropImage|watch|crop|clientHeight|clientWidth|dy|dyif|dx|dxif|destroyed|import|triggerListener|switch'.split('|'),0,{}))

</script>

<style scoped>
.t-image-crop{position:fixed;width:100%;height:100%;left:0;top:0;background:#000;z-index:1000;}.t-absolute{position:absolute;}.t-invisible{opacity:0;}.t-absolute-center{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);}.t-image-crop-tip{color:#fff;font-size:10px;}.t-image-crop-image{position:absolute;}.t-image-crop-area{border:1px solid rgba(255,255,255,.5);box-shadow:0 1px 10px rgba(0,0,0,1);}.t-image-crop-area:before,.t-image-crop-area:after{content:"";display:block;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);}.t-image-crop-area:before{width:100%;height:33.333333%;border-top:1px dashed rgba(255,255,255,.5);border-bottom:1px dashed rgba(255,255,255,.5);}.t-image-crop-area:after{width:33.333333%;height:100%;border-left:1px dashed rgba(255,255,255,.5);border-right:1px dashed rgba(255,255,255,.5);}.t-image-crop-mask{background:rgba(255,255,255,.5)}.t-image-crop-buttons-item{position:absolute;bottom:10px;padding:5px 10px;color:rgba(255,255,255,1);border:1px solid rgba(255,255,255,1);border-radius:4px;text-shadow:1px 1px 0 rgba(0,0,0,1);box-shadow:0 1px 10px rgba(0,0,0,1);z-index:1;}.t-image-crop-buttons-cancel{left:10px;}.t-image-crop-buttons-ensure{right:10px;}.t-image-crop-buttons-rotate{left:50%;transform:translateX(-50%);}
</style>